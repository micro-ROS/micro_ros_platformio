name: CI

on:
    pull_request:
      branches:
        - '**'

jobs:

    micro_ros_arduino:
        runs-on: ubuntu-20.04
        container: ubuntu:20.04

        steps:
        - uses: actions/checkout@v2
          with:
            path: checkout/

        - name: Build
          run: |
            apt update
            DEBIAN_FRONTEND=noninteractive
            apt install -y git curl python3 python3-pip git cmake
            python3 -c "$(curl -fsSL https://raw.githubusercontent.com/platformio/platformio/master/scripts/get-platformio.py)"
            PATH=$PATH:~/.platformio/penv/bin
            cd checkout/example_project_2
            pio run
